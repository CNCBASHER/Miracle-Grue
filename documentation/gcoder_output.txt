Gcoder module output

Naturally, the output of the gcoder is gcode, specifically the following gcode flavors are supported:
- Makerbot firmware (add link to specific version and repository here).
- No one else's
The following section describe what type of gcode commands are generated by the Miracle Grue.

The gcode emitted by the gcode contains annotations. Annotations are text strings embedded in gcode comments (enclosed in parantheses).

These annotations allow to:
- track which module a section of gcode comes from
- provide visual cues for visualizers (i.e. colors and materials)
- reconstruct the configuration of the Growth (all model and config files, user settings) 
- perform other magic (TBD)

Miracle's Gcode is divided in these main sections:

global state control:

* initialisation:
- setting up the units G21
- setup global modes for coordinate, 
- turn off other global state if necessary (extruders, tool height/radius compensation) 
G21 (set units to mm)
G90 (set positioning to absolute)

* cleanup:
;M113 S0.0 (end of gcode file)
M18 (Turn off steppers)

Extruder control 

* initialization:
M108 R1.98 (set extruder speed)
M103 (Make sure extruder is off)

* operation:
M101 (Extruder on, forward)
M102 (Extruder on, reverse)
M103 (Extruder off)
M104 S225 T0 (set extruder temperature)
M6 T0 (wait for toolhead parts, nozzle, HBP, etc., to reach temperature)
G04 P5000 (Wait t/1000 seconds)

* cleanup: 
M103 (Extruder off)

Heated build platform control

* initialization, operation and cleanup
M109 S125 T0 (set heated-build-platform temperature)

Heated chamber control

TBD, this is not a supported feature for this version

Positioning control

This section is concerned with the XYZ movement of the tool(s) inside the machine volume. 
Positioning control is concerned with machine specific configuration such as:
- the position (and availability) of limit switches
- the platform size
- the location of the wiper(s)
The positioning gcode is annotated by the module which generates it. 
It is therefore possible to know if a positioning command has been issued by:
- the skinner
- the filler
- the supporter (for support structures)

* initialization (homing)
G162 Z F500 (home Z axis maximum)
G92 Z10 (set Z to 0)
G1 Z0.0 (move z down 10)
G162 Z F100 (home Z axis maximum)
G161 X Y F2500 (home XY axes minimum)
M132 X Y Z A B (Recall stored home offsets for XYZAB axis)

* position control
G0
G1

* cleanup
M18 (Turn off steppers) 

Multiple extruder support

Miracle Grue handles multiple extruders but the author of this document is currently confused and should check at the firmware level.
- Coordinate systems for each extruder
- Individual stepper control

4D control

For this version, extruder control is separate from position control. 
But it is also possible to consider the extrusion as a supplemental axis (A) whose movement can be linearly combined with XYZ.

 
 

